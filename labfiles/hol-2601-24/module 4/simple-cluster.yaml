formatVersion: 1
inputs: {}
resources:
  CCI_Supervisor_Namespace_1:
    type: CCI.Supervisor.Namespace
    properties:
      name: ns-apps-project-pbdj2
      existing: true
  Kubernetes_Cluster_1:
    type: CCI.Supervisor.Resource
    properties:
      context: ${resource.CCI_Supervisor_Namespace_1.id}
      manifest:
        apiVersion: cluster.x-k8s.io/v1beta1
        kind: Cluster
        metadata:
          name: kubernetes-cluster-1-${env.shortDeploymentId}
        spec:
          clusterNetwork:
            pods:
              cidrBlocks:
                - 192.168.156.0/20
            services:
              cidrBlocks:
                - 10.96.0.0/12
          topology:
            class: builtin-generic-v3.3.0
            version: v1.32.0---vmware.6-fips-vkr.2
            variables:
              - name: vsphereOptions
                value:
                  persistentVolumes:
                    defaultStorageClass: cluster-wld01-01a-vsan-storage-policy
              - name: kubernetes
                value:
                  certificateRotation:
                    enabled: true
                    renewalDaysBeforeExpiry: 90
              - name: vmClass
                value: best-effort-small
              - name: storageClass
                value: cluster-wld01-01a-vsan-storage-policy
            controlPlane:
              replicas: 1
              metadata:
                annotations:
                  run.tanzu.vmware.com/resolve-os-image: os-name=photon, content-library=cl-5e990aa753a07bc9e
            workers:
              machineDeployments:
                - class: node-pool
                  name: kubernetes-cluster-yxtx-nodepool-63yr
                  replicas: 1
                  metadata:
                    annotations:
                      run.tanzu.vmware.com/resolve-os-image: os-name=photon, content-library=cl-5e990aa753a07bc9e
